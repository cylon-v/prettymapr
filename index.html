<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Prettymapr by paleolimbot</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-light.css">
    <meta name="viewport" content="width=device-width">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Prettymapr</h1>
        <p>Tools for rapid, publication-grade mapping in R</p>

        <p class="view"><a href="https://github.com/paleolimbot/prettymapr">View the Project on GitHub <small>paleolimbot/prettymapr</small></a></p>


        <ul>
          <li><a href="https://github.com/paleolimbot/prettymapr/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/paleolimbot/prettymapr/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/paleolimbot/prettymapr">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h1>
<a id="prettymapr-tools-for-rapid-publication-grade-mapping-in-r" class="anchor" href="#prettymapr-tools-for-rapid-publication-grade-mapping-in-r" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Prettymapr: Tools for rapid, publication-grade mapping in R</h1>

<p><a href="https://cran.r-project.org/package=prettymapr"><img src="http://cranlogs.r-pkg.org/badges/prettymapr" alt=""></a></p>

<p>Prettymapr automates the process of creating a scale bar and north arrow in any package that uses base graphics to plot in R. Bounding box tools help find and manipulate extents. Geocoding tools help plot locations on maps. Finally, there is a function to automate the process of setting margins, plotting the map, scale bar, and north arrow, and resetting graphic parameters upon completion.</p>

<h2>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Installation</h2>

<p>The prettymapr package is available on CRAN, and can be installed using <code>install.packages("prettymapr")</code>. The manual is also <a href="https://cran.r-project.org/web/packages/prettymapr/prettymapr.pdf">available on the CRAN website</a></p>

<h2>
<a id="bounding-box-tools" class="anchor" href="#bounding-box-tools" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Bounding box tools</h2>

<p>The concept of a bounding box is integral to the <a href="https://cran.r-project.org/package=rosm">rosm</a> and <a href="https://cran.r-project.org/package=rcanvec">rcanvec</a> packages (as well as some others), so there's a few tools to create/manipulate them here. I can never remember the proper way to create a bounding box using <code>sp::bbox()</code>, so the <code>makebbox(n, e, s, w)</code> function is included to make this process a little easier (I can somehow always remember 'never eat shredded wheat' for the cardinal directions). The easiest way to get these numbers is from the <a href="http://www.openstreetmap.org/export">Open Street Maps Export page</a>.</p>

<div class="highlight highlight-source-r"><pre>library(<span class="pl-smi">prettymapr</span>)
makebbox(<span class="pl-c1">50.1232</span>, <span class="pl-k">-</span><span class="pl-c1">122.9574</span>, <span class="pl-c1">50.1035</span>, <span class="pl-k">-</span><span class="pl-c1">123.0042</span>)</pre></div>

<pre><code>##         min       max
## x -123.0042 -122.9574
## y   50.1035   50.1232
</code></pre>

<p>It is, of course, easier to search for bounding boxes by human-readable location (google maps style), although this requires some confidence in the internet to recognize your location (the default <code>source</code> is the <a href="https://pickpoint.io/">Pickpoint API</a>, although you can pass <code>source="google"</code> to use the <a href="https://developers.google.com/maps/">Google Maps API</a>.</p>

<div class="highlight highlight-source-r"><pre>searchbbox(<span class="pl-s"><span class="pl-pds">"</span>alta lake, british columbia<span class="pl-pds">"</span></span>)</pre></div>

<pre><code>##          min        max
## x -123.00891 -122.96891
## y   50.08865   50.12865
</code></pre>

<p>If you pass a vector into <code>searchbbox()</code> it will return the bounding box that contains all of them.</p>

<div class="highlight highlight-source-r"><pre>searchbbox(c(<span class="pl-s"><span class="pl-pds">"</span>halifax, ns<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>moncton, nb<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>wolfville, ns<span class="pl-pds">"</span></span>))</pre></div>

<pre><code>##         min       max
## x -64.91537 -63.41497
## y  44.48842  46.17745
</code></pre>

<p>And, if you don't care to modify the values yourself to zoom in or out, you can use <code>zoombbox()</code>.</p>

<div class="highlight highlight-source-r"><pre><span class="pl-smi">bb</span> <span class="pl-k">&lt;-</span> makebbox(<span class="pl-c1">50.1232</span>, <span class="pl-k">-</span><span class="pl-c1">122.9574</span>, <span class="pl-c1">50.1035</span>, <span class="pl-k">-</span><span class="pl-c1">123.0042</span>)
zoombbox(<span class="pl-smi">bb</span>, <span class="pl-c1">0.8</span>) <span class="pl-c"># zooms out a tad</span></pre></div>

<pre><code>##          min        max
## x -123.01005 -122.95155
## y   50.10104   50.12566
</code></pre>

<h2>
<a id="geocoding-tools" class="anchor" href="#geocoding-tools" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Geocoding tools</h2>

<p>Sometimes it's nice to be able to put cities on maps without having to look up their latitude and longitude, which is where the <code>geocode()</code> function comes in handy. It should be noted that the <a href="https://cran.r-project.org/package=ggmap">ggmap package</a> also has a <code>geocode()</code> function that is more suited to large numbers of requests. If you do a lot of this, please <a href="https://pickpoint.io/users/sign_up">get your own API key</a> so not everybody is using up mine (get one for the Google Maps API <a href="https://developers.google.com/maps/documentation/geocoding/get-api-key">here</a> ).</p>

<div class="highlight highlight-source-r"><pre><span class="pl-smi">results</span> <span class="pl-k">&lt;-</span> geocode(c(<span class="pl-s"><span class="pl-pds">"</span>halifax, NS<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>wolfville, NS<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>moncton, NB<span class="pl-pds">"</span></span>))
names(<span class="pl-smi">results</span>) <span class="pl-c"># several standard columns</span></pre></div>

<pre><code>##  [1] "query"   "source"  "status"  "rank"    "address" "lon"     "lat"    
##  [8] "bbox_n"  "bbox_e"  "bbox_s"  "bbox_w"  "id"
</code></pre>

<div class="highlight highlight-source-r"><pre><span class="pl-smi">results</span>[c(<span class="pl-s"><span class="pl-pds">"</span>query<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>address<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>lon<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>lat<span class="pl-pds">"</span></span>)]</pre></div>

<pre><code>##           query                                            address
## 1   halifax, NS       Halifax, Halifax County, Nova Scotia, Canada
## 2 wolfville, NS       Wolfville, Kings County, Nova Scotia, Canada
## 3   moncton, NB Moncton, Westmorland County, New Brunswick, Canada
##         lon      lat
## 1 -63.57497 44.64842
## 2 -64.36449 45.09123
## 3 -64.79897 46.09733
</code></pre>

<h2>
<a id="mapping-tools" class="anchor" href="#mapping-tools" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Mapping tools</h2>

<p>There's also a few mapping tools in prettymapr, most notably the <code>prettymap()</code> function, which evaluates its first argument while setting the margins to 0 (which is probably what you want for plotting a map). It also automatically adds a scalebar (although you could do this yourslef using the <code>addscalebar()</code> function).</p>

<div class="highlight highlight-source-r"><pre>library(<span class="pl-smi">rosm</span>)
prettymap(osm.plot(searchbbox(<span class="pl-s"><span class="pl-pds">"</span>nova scotia<span class="pl-pds">"</span></span>)))</pre></div>

<p><img src="README_files/figure-markdown_github/unnamed-chunk-6-1.png" alt=""></p>

<p>Any plotting code has to go within <code>prettymap()</code>, so if you need multiple lines you can enclose them in curly brackets (<code>{}</code>). There's tons of options for <code>prettymap()</code> that let you customize the north arrow, scale bar etc., which you can find in the <a href="https://cran.r-project.org/web/packages/prettymapr/prettymapr.pdf">{prettymapr} manual</a>.</p>

<div class="highlight highlight-source-r"><pre><span class="pl-smi">cities</span> <span class="pl-k">&lt;-</span> geocode(c(<span class="pl-s"><span class="pl-pds">"</span>halifax, NS<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>wolfville, NS<span class="pl-pds">"</span></span>, <span class="pl-s"><span class="pl-pds">"</span>moncton, NB<span class="pl-pds">"</span></span>))
prettymap({
  osm.plot(searchbbox(<span class="pl-s"><span class="pl-pds">"</span>nova scotia<span class="pl-pds">"</span></span>))
  osm.points(<span class="pl-smi">cities</span><span class="pl-k">$</span><span class="pl-smi">lon</span>, <span class="pl-smi">cities</span><span class="pl-k">$</span><span class="pl-smi">lat</span>, <span class="pl-v">pch</span><span class="pl-k">=</span><span class="pl-c1">18</span>)
})</pre></div>

<p><img src="README_files/figure-markdown_github/unnamed-chunk-7-1.png" alt=""></p>

<p>Any plotting code that uses base plotting can be used inside <code>prettymap()</code>, including <a href="https://cran.r-project.org/package=rosm">rosm</a>, <a href="https://cran.r-project.org/package=rcanvec">rcanvec</a>, <a href="https://cran.r-project.org/package=OpenStreetMap">OpenStreetMap</a>, <a href="https://cran.r-project.org/package=cartography">cartography</a>, <a href="https://cran.r-project.org/package=marmap">marmap</a>, and others. If only a scale bar or north arrow are required, there are independent functions to add to existing code.</p>

<div class="highlight highlight-source-r"><pre>library(<span class="pl-smi">maptools</span>)
data(<span class="pl-s"><span class="pl-pds">"</span>wrld_simpl<span class="pl-pds">"</span></span>)
plot(<span class="pl-smi">wrld_simpl</span>, <span class="pl-v">xlim</span><span class="pl-k">=</span>c(<span class="pl-k">-</span><span class="pl-c1">131</span>, <span class="pl-k">-</span><span class="pl-c1">52</span>), <span class="pl-v">ylim</span><span class="pl-k">=</span>c(<span class="pl-c1">10</span>, <span class="pl-c1">55</span>))
addscalebar()
addnortharrow()</pre></div>

<p><img src="README_files/figure-markdown_github/unnamed-chunk-8-1.png" alt=""></p>

<p>That's it for now! More convenience functions on the way...</p>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/paleolimbot">paleolimbot</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-73397650-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>
